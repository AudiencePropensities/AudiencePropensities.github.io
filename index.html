<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Revolution Analytics</title>
      <meta name="description" content="Decision Tree">
      <meta name="author" content="Revolution Analytics">
      <meta http-equiv="X-UA-Compatible" content="IE=10">
      <!-- styles -->
      <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <link href="assets/css/revo-dtree.min.css" rel="stylesheet">
   </head>
   <body class="revo-dtree">
      <!-- Tool tip -->
      <script type="text/html" id="regression-tip">
         <div class="tip tip-<%= pD.pos %>">
           <div class="tip-arrow tip-arrow-<%= pD.arrow %>"></div>
           <div class="tip-inner">
             <div class="tip-hd"><strong><%= pD.label %></strong></div>
             <div class="tip-bd">
               <table>
                <body>
                 <tr><td>n</td><td> = </td><td><%=  pD.n %></td></tr>
                 <tr><td>dev</td><td> = </td><td><%= pD.deviance %></td></tr>
                 <tr><td>pred</td><td> = </td><td><%= pD.yval %></td></tr>
                 </body>
               </table>
             </div>
             <div class="tip-ft">
               <strong> <%= pD.type === 'leaf' ? 'terminal node' : 'SPLIT &#183; ' + pD.splitVar %></strong>
             </div>
           </div>
         </div>         
      </script>
      <script type="text/html" id="classification-tip">
         <div class="tip tip-<%= pD.pos %>">
           <div class="tip-arrow tip-arrow-<%= pD.arrow %>"></div>
           <div class="tip-inner">
             <div class="tip-hd"><strong><%= pD.label %></strong></div>
             <div class="tip-bd">
               <span>n = <%=n=pD.n %>, loss = <%=pD.loss %>, pred = <%= pD.yval%></span>
               <div id="surface" style="opacity:1;"></div>
             </div>
             <div class="tip-ft">
               <strong> <%= pD.type === 'leaf' ? 'terminal node' : 'SPLIT &#183; ' + pD.splitVar %></strong>
             </div>
           </div>
         </div>         
      </script>
      <script type="text/html" id="regression-legend">
         <div class="legend-container">
           <div class="sticky">              
              <div id="legend-toggle" class="legend-expand">-</div>
              <div class="shape square" style="background:<%= range[1] %>">
                 <div class="split-info"><%= legend.rule.depVars.name %></div>
              </div>              
              <div id="dep-legend" class="dep-legend gradient">
                <div class="plot" id="gradient"></div>
                <div class="axis"></div>
                <div class="axis-value">
                    <span class="left">0</span>
                    <span class="right"><%=d3.round(legend.rule.depVars.maxyval, 1)%></span>
                </div>
              </div>
              <div class="indvars-container">
                <ul id="legend-vars"></ul>
              </div>
           </div>
         </div>  
      </script>
      <script type="text/html" id="classification-legend">
         <div class="legend-container">
           <div class="sticky">
              <div>
                <div id="legend-toggle" class="legend-expand">-</div>
                <div class="shape square" style="background:<%= range[1] %>">
                  <div class="split-info"><%= legend.rule.depVars.name %></div>
                </div>
              </div>
              <div id="dep-legend" class="dep-legend">
                <ul></ul>                
              </div>
              <div class="indvars-container">
                <ul id="legend-vars"></ul>
              </div>
           </div>
         </div>  
      </script>
      <script type="text/html" id="pred-path">
         <div class="legend-container">
           <div class="sticky">
              <div class="indvars-container">
                <p class="path-title">Predicting <%= variable %> </p>
                <ul id="pred-path-list"></ul>
              </div>
           </div>
         </div>
      </script>

      <!-- Navbar
         ================================================== -->
      <div class="navbar navbar-fixed-top">
         <div class="navbar-inner">
            <div class="container-fluid">
              <!-- a class="brand" href="#">RevoTreeView</a -->
               <img src="http://www.underconsideration.com/brandnew/archives/Acxiom_logo_detail_1.png" style="position:absolute;left:2px;width:128px;height:40px">
               <ul class="nav pull-right">
                  <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-wrench"></i> Options <b class="caret"></b></a>
                     <ul id="layers-dropdown" class="dropdown-menu layers">
                       <div>
                        <label class="checkbox">
                          <input class="checkbox-filter-layers" id="1" type="checkbox" checked>
                          Show variability using border thickness
                        </label>                  
                        <label class="checkbox">
                          <input class="checkbox-filter-layers" id="0" type="checkbox" checked>
                          Show split and predicted values on node label
                        </label>
                        <label class="indent">
                          Truncate labels: <input type="text" id="label-length">
                        </label>
                        <label class="checkbox">
                          <input class="checkbox-filter-layers" id="2" type="checkbox" checked>
                          Use node color to identify variables
                        </label> 
                        <label class="checkbox">
                          <input class="checkbox-filter-layers" id="5" type="checkbox" checked>
                          Display legend area
                        </label>
                        <ul class="inline">                                
                          <li>
                            <label class="radio indent">
                              <input type="radio" name="var-display" id="3" value="3" checked>
                              Show color legend
                            </label>
                          </li>
                          <li>
                            <label class="radio indent">
                              <input type="radio" name="var-display" id="4" value="4">
                              Show prediction path
                            </label>
                          </li>
                        </ul>
                      </div>
                    </ul>
                  </li>
                  <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help <b class="caret"></b></a>
                     <ul class="dropdown-menu">
                        <li><a href="assets/help/help.html" target="_blank"><i class="icon-share-alt"></i> Open Help</a></li>
                        <li class="divider"></li>
                        <li class="nav-header">Hints</li>
                        <li><span><code>Click      </code>Expand / Collapse</span></li>
                        <li><span><code>CTRL + Click</code>Expand 1 level</span></li>
                        <li><span><code>ALT + Click </code> Expand all levels</span></li>
                     </ul>
                  </li>
               </ul>
            </div>
         </div>
      </div>

      <!-- Container
         ================================================== -->
      <div class="container-fluid container-dtree">
       <div class="row-fluid">
        <!-- Error Essage -->
        <div id="dms" class="dms hide"></div>
        <div id="legend-container" class="pull-right">
          <div id="legend"></div>
          <div id="path" class="hide"></div>
        </div>
        <div id="body"></div>                
      </div>
    </div>
   </body>

   <!-- javascript -->
   <script src="assets/vendor/jquery/js/jquery.min.js"></script>
   <script src="assets/vendor/bootstrap/js/bootstrap-dropdown.js"></script>
   <script src="assets/vendor/d3/js/d3.min.js"></script>
   <script src="assets/js/revo-dtree.js"></script>
   <script type="text/javascript">
      (function(context) {
        try {
          var data = {"method":"anova","summary": {"minn":8,"maxn": 248,"mindev":0.875,"maxdev": 55.2217741935485},"legend": {"depVars": {"name": "case","minyval":0.104477611940299,"maxyval": 0.923076923076923},"indVars": ["age","education","induced","parity","spontaneous"]},"label":"root","n":248,"deviance":55.2217700,"yval":0.3346774,"splitVar":"spontaneous","splitVal":" 0.5","type":"split","children": [{"label":"spontaneous< 0.5","n":141,"deviance":22.4397200,"yval":0.1985816,"splitVar":"induced","splitVal":" 0.5","type":"split","children": [{"label":"induced< 0.5","n":67,"deviance": 6.2686570,"yval":0.1044776,"type":"leaf"},{"label":"induced>=0.5","n":74,"deviance":15.0405400,"yval":0.2837838,"splitVar":"education","splitVal":"multiple","type":"split","children": [{"label":"education=12+ yrs","n":42,"deviance": 7.0714290,"yval":0.2142857,"type":"leaf"},{"label":"education=0-5yrs,6-11yrs","n":32,"deviance": 7.5000000,"yval":0.3750000,"splitVar":"age","splitVal":" 28.5","type":"split","children": [{"label":"age< 28.5","n":8,"deviance": 0.8750000,"yval":0.1250000,"type":"leaf"},{"label":"age>=28.5","n":24,"deviance": 5.9583330,"yval":0.4583333,"type":"leaf"}]}]}]},{"label":"spontaneous>=0.5","n":107,"deviance":26.7289700,"yval":0.5140187,"splitVar":"parity","splitVal":"3.5","type":"split","children": [{"label":"parity>=3.5","n":23,"deviance": 4.8695650,"yval":0.3043478,"type":"leaf"},{"label":"parity< 3.5","n":84,"deviance":20.5714300,"yval":0.5714286,"splitVar":"age","splitVal":" 30.5","type":"split","children": [{"label":"age< 30.5","n":48,"deviance":11.8125000,"yval":0.4375000,"splitVar":"age","splitVal":"28.5","type":"split","children": [{"label":"age>=28.5","n":10,"deviance": 1.6000000,"yval":0.2000000,"type":"leaf"},{"label":"age< 28.5","n":38,"deviance": 9.5000000,"yval":0.5000000,"splitVar":"spontaneous","splitVal":" 1.5","type":"split","children": [{"label":"spontaneous< 1.5","n":28,"deviance": 6.8571430,"yval":0.4285714,"splitVar":"parity","splitVal":"1.5","type":"split","children": [{"label":"parity>=1.5","n":13,"deviance": 2.3076920,"yval":0.2307692,"type":"leaf"},{"label":"parity< 1.5","n":15,"deviance": 3.6000000,"yval":0.6000000,"type":"leaf"}]},{"label":"spontaneous>=1.5","n":10,"deviance": 2.1000000,"yval":0.7000000,"type":"leaf"}]}]},{"label":"age>=30.5","n":36,"deviance": 6.7500000,"yval":0.7500000,"splitVar":"spontaneous","splitVal":" 1.5","type":"split","children": [{"label":"spontaneous< 1.5","n":23,"deviance": 5.2173910,"yval":0.6521739,"type":"leaf"},{"label":"spontaneous>=1.5","n":13,"deviance": 0.9230769,"yval":0.9230769,"type":"leaf"}]}]}]}]};
          dtree({ data: data, id: 'tree', palette: null });
        } catch(e) {
          var dms = document.getElementById('dms');
          dms.innerHTML = e.toString();
          dms.className = 'dms alert alert-error';
        }
      })(this);
   </script>
</html>